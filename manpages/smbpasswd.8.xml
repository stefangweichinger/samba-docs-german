<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
				  
<!ENTITY % globalentities SYSTEM '../entities/global.entities'> %globalentities;
]>
<refentry id="smbpasswd.8">

<refmeta>
	<refentrytitle>smbpasswd</refentrytitle>
	<manvolnum>8</manvolnum>
</refmeta>


<refnamediv>
	<refname>smbpasswd</refname>
	<refpurpose>ändert das SMB-Passwort eines Benutzers</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis>
		<command>smbpasswd</command>
		<arg choice="opt">-a</arg>	
		<arg choice="opt">-x</arg>	
		<arg choice="opt">-d</arg>	
		<arg choice="opt">-e</arg>	
		<arg choice="opt">-D Debug-Ebene</arg>	
		<arg choice="opt">-n</arg>	
		<arg choice="opt">-r &lt;entfernter Rechner&gt;</arg>	
		<arg choice="opt">-R &lt;Namensauflösungsreihenfolge&gt;</arg>	
		<arg choice="opt">-m</arg>	
		<arg choice="opt">-U Benutzername[%Passwort]</arg>	
		<arg choice="opt">-h</arg>	
		<arg choice="opt">-s</arg>	
		<arg choice="opt">-w Passwort</arg>	
		<arg choice="opt">-i</arg>
		<arg choice="opt">-L</arg>
		<arg choice="opt">Benutzername</arg>	
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>BESCHREIBUNG</title>

	<para>Dieses Werkzeug ist Teil der 
	<citerefentry><refentrytitle>Samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry>-Suite.</para>
	
	<para>Das Programm smbpasswd hat mehrere verschiedene Aufgaben,
	jenachdem, ob es vom Benutzer <emphasis>root</emphasis> ausgeführt 
	wird oder nicht. Einem normalen Benutzer erlaubt es, das Passwort 
	seiner SMB-Sitzungen auf allen Rechnern zu ändern, die SMB-Passwörter
	speichern.</para>

	<para>Standardmäßig (ohne Angabe von Argumenten) versucht es, das 
	aktuelle SMB-Passwort des Benutzers auf dem lokalen Rechner zu ändern. 
	Auf eine ähnliche Weise funktioniert das Programm 
	<command>passwd(1)</command>. Aber <command>
	smbpasswd</command> unterscheidet sich von passwd darin, dass es nicht 
	<emphasis>setuid root</emphasis> ist, sondern in einem 
	Client-Server-Modus läuft und mit einem lokal laufenden 
	<citerefentry><refentrytitle>smbd</refentrytitle>
	<manvolnum>8</manvolnum></citerefentry> kommuniziert. 
	Damit das funktionieren kann muss als Konsequenz der smbd-Daemon auf
	dem lokalen Rechner laufen. Auf einem UNIX-Rechner werden die 
	verschlüsselten SMB-Passwörter normalerweise in der Datei
	<citerefentry><refentrytitle>smbpasswd</refentrytitle>
	<manvolnum>5</manvolnum></citerefentry> gespeichert.</para>

	<para>Wenn es von einem gewöhnlichen Benutzer ohne Optionen ausgeführt 
	wird, fragt smbpasswd ihn nach seinem alten SMB-Passwort und dann fragt
	es zwei mal nach seinem neuen Passwort, um sicherzugehen, dass das neue
	Passwort korrekt eingegeben wird. Während der Eingabe sind die 
	Passwörter auf dem Bildschirm nicht sichtbar. Sollten Sie ein leeres 
	SMB-Passwort haben (angegeben durch den String "NO PASSWORD" in der
	Datei smbpasswd), so drücken Sie einfach die Eingabetaste, wenn Sie nach
	Ihrem alten Passwort gefragt werden.</para>

	<para>Normale Benutzer können mit smbpasswd auch ihr SMB-Passwort auf
	entfernten Rechnern ändern, z.B. auf Windows NT-Primären 
	Domänen-Controllern. Siehe die Optionen <parameter>-r</parameter> und
	<parameter>-U</parameter> unten.</para>

	<para>Unter root ausgeführt, kann smbpasswd auch neue Benutzer 
	zur smbpasswd-Datei hinzufügen oder von dort löschen, und es kann
	dann Änderungen an den Attributen eines Benutzers in dieser Datei 
	vornehmen. Unter root greift <command>smbpasswd</command> direkt auf
	die Datei smbpasswd zu, so dass auch dann Änderungen vorgenommen werden
	können, wenn smbd gar nicht läuft.</para>
</refsect1>

<refsect1>
	<title>OPTIONEN</title>
	<variablelist>
		<varlistentry>
		<term>-a</term>
		<listitem><para>Diese Option gibt an, dass der folgende Benutzername
		zur lokalen Datei smbpasswd hinzugefügt werden soll, mit dem  
		eingegebenen neuen Passwort (drücken Sie die Eingabetaste für das
		alte Passwort). Diese Option wird ignoriert, falls der folgende
		Benutzername in der smbpasswd-Datei bereits existiert und sie wird
		dann wie ein normaler Befehl zum Ändern eines Passworts behandelt. 
		Beachten Sie, dass die standardmäßigen passdb-Backends verlangen,
		dass der Benutzer in der Passwortdatei des Systems bereits
		vorhanden ist (normalerweise <filename>/etc/passwd</filename>),
		sonst schlägt die Anfrage, den Benutzer hinzuzufügen, fehl.
		</para>
		
		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>
		
		
		
		<varlistentry>
		<term>-x</term>
		<listitem><para>Diese Option gibt an, dass der folgende Benutzername
		aus der lokalen smbpasswd-Datei gelöscht werden soll.
		</para>

		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>
		
		
		
		<varlistentry>
		<term>-d</term>
		<listitem><para>Diese Option gibt an, dass der folgende Benutzername 
		in der lokalen smbpasswd-Datei deaktiviert werden soll.
		Das wird dadurch bewerkstelligt, dass das Flag 
		<constant>'D'</constant> in den Bereich mit den Kontoangaben der
		Datei smbpasswd geschrieben wird. Anschließend schlagen alle
		Versuche einer SMB-Authentifikation für diesen Benutzernamen 
		fehl.</para>
		
		<para>Falls die smbpasswd-Datei im 'alten' Format ist (vor 
		Samba 2.0), gibt es im Passworteintrag des Benutzers keinen Platz,
		wo diese Information hingeschrieben werden könnte, und der Befehl
		schlägt fehl. Siehe 
		<citerefentry><refentrytitle>smbpasswd</refentrytitle>
		<manvolnum>5</manvolnum></citerefentry> für weitere Details zu den
		'alten' und neuen Passwort-Dateiformaten.</para>

		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>
		
		
		<varlistentry>
		<term>-e</term>
		<listitem><para>Diese Option gibt an, dass der folgende Benutzername 
		in der lokalen smbpasswd-Datei aktiviert werden soll, 
		falls das Konto zuvor deaktiviert wurde. Falls das Konto nicht
		deaktiviert wurde, hat diese Option keinen Effekt. Nachdem das
		Konto aktiviert wurde, kann der Benutzer sich mit SMB wieder
		authentifizieren.</para>
		
		<para>Falls die smbpasswd-Datei im 'alten' Format ist, kann
		<command>smbpasswd</command> das Konto NICHT aktivieren. Siehe 
		<citerefentry><refentrytitle>smbpasswd</refentrytitle>
		<manvolnum>5</manvolnum></citerefentry> für weitere Details zu den
		'alten' und neuen Passwort-Dateiformaten.</para>

		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>
		


		<varlistentry>
		<term>-D Debug-Ebene</term>
		<listitem><para><replaceable>Debug-Ebene</replaceable> ist ein
		Integer von 0 bis 10. Falls nicht angegeben, ist der Vorgabewert 
		für diesen Parameter gleich Null.</para>

		<para>Je höher dieser Wert ist, desto mehr Details werden in den
		Log-Dateien über die Aktivitäten von smbpasswd festgehalten. Auf
		der Ebene 0 werden nur kritische Fehler und ernste Warnungen 
		gespeichert.</para>

		<para>Auf Ebenen über 1 werden erhebliche Mengen an Log-Daten
		gespeichert, daher sollten diese Ebenen nur bei der Untersuchung
		eines Problems verwendet werden. Ebenen über 3 sind für den Gebrauch 
		von Entwicklern gedacht und erzeugen RIESIGE Mengen an Log-Daten,
		von denen die meisten extrem kryptisch sind. 
		</para></listitem>
		</varlistentry>
		
		
		
		<varlistentry>
		<term>-n</term>
		<listitem><para>Diese Option gibt an, dass für den folgenden
		Benutzernamen das Passwort in der lokalen smbpasswd-Datei auf 
		Null, d.h. ein leeres Passwort, zurückgesetzt werden soll. 
		Das wird dadurch bewerkstelligt, dass in der smbpasswd-Datei 
		am Anfang des Passworts der String "NO PASSWORD" gespeichert 
		wird.</para>

		<para>Man beachte, dass der Administrator den folgenden Parameter
		im Abschnitt [global] der Datei <filename>smb.conf</filename>
		setzen muss, damit Benutzer sich auf einem Samba-Server anmelden
		kännen, nachdem das Passwort in der smbpasswd-Datei auf 
		"NO PASSWORD" eingestellt wurde:</para>
		
		<para><command>null passwords = yes</command></para> 
		
		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>
		
		
		
		<varlistentry>
		<term>-r entfernter Rechnername</term>
		<listitem><para>Mit dieser Option kann ein Benutzer angeben, auf
		welchem Rechner er sein Passwort ändern möchte. Ohne diesen 
		Parameter geht smbpasswd vom lokalen Host aus. Der
		<replaceable>entfernte Rechnername</replaceable> ist der 
		NetBIOS-Name des SMB/CIFS-Servers, der für den Versuch einer
		Passwortänderung kontaktiert werden soll. Dieser Name wird 
		mit dem standardmäßigen Namensauflösungsmechanismus in allen
		Programmen der Samba-Suite in eine IP-Adresse aufgelöst. Siehe 
		den Parameter <parameter>-R Namensauflösungsreihenfolge</parameter>
		für weitere Details zur Änderung dieses Auflösungsmechanismus.
		</para>

		<para>Der Benutzername, dessen Passwort geändert wird, ist der 
		des aktuell angemeldeten UNIX-Benutzers. Siehe den Parameter
		<parameter>-U Benutzername</parameter> zu Details darüber, wie
		man das Passwort eines anderen Benutzers ändert.</para>

		<para>Man beachte, dass bei der Änderung eines Windows 
		NT-Domänenpassworts der angegebene entfernte Rechner der Primäre
		Domänen-Controller der Domäne sein muss (Backup Domänen-Controller
		verfügen lediglich über eine nur lesbare Kopie der 
		Benutzerkonten-Datenbank und erlauben keine Passwortänderung).</para>
		
		<para>Beachten Sie, dass Windows 95/98 keine echte 
		Passwort-Datenbank besitzt. Daher ist es nicht möglich,
		Passwörter zu ändern, indem ein Win95/98-Rechner als entfernter
		Zielrechner angegeben wird.</para>
		</listitem>
		</varlistentry>
		
		
		<varlistentry>
		<term>-R Namensauflösungsreihenfolge</term>
		<listitem><para>Mit dieser Option kann der Benutzer von smbpasswd
		bestimmen, welche Dienste bei der Namensauflösung benutzt werden,
		wenn der NetBIOS-Name des Hosts gesucht wird, mit dem eine
		Verbindung hergestellt wird.</para>

		<para>Verfügbare Option sind: "lmhosts", "host", "wins" und "bcast".
		Sie bewirken, dass Namen wie folgt aufgelöst werden:</para>

		<itemizedlist>
			<listitem><para><constant>lmhosts</constant>: Sucht eine 
			IP-Adresse in der Samba-Datei lmhosts. Falls die Zeile in 
			lmhosts keinen mit dem NetBIOS-Namen verbundenen Namenstyp 
			hat (Details siehe 
			<citerefentry><refentrytitle>lmhosts</refentrytitle>
			<manvolnum>5</manvolnum></citerefentry>), dann trifft bei
			einer Suche jeder gefundene Namenstyp zu.</para>
			</listitem>
			
			<listitem><para><constant>host</constant>: Führt eine 
			standardmäßige Auflösung von Hostname zu IP-Adresse aus, 
			entweder mit der Systemdatei <filename>/etc/hosts</filename>, 
			mit einer NIS- oder DNS-Suche. Diese Methode der Namensauflösung 
			ist abhängig vom Betriebssystem und wird z.B. unter IRIX oder
			Solaris mit der Datei <filename>/etc/nsswitch.conf</filename> 
			gesteuert). Beachten Sie, dass diese Methode nur dann benutzt 
			wird, wenn der gesuchte NetBIOS-Namenstyp der Typ 0x20 (Server)
			ist, ansonsten wird sie ignoriert.</para>
			</listitem>
			
			<listitem><para><constant>wins</constant>: Fragt einen Namen 
			mit Hilfe der IP-Adresse ab, die im Parameter 
			<parameter>wins server</parameter> aufgelistet ist. Falls kein
			WINS-Server angegeben wurde, wird diese Methode ignoriert.</para>
			</listitem>
			
			<listitem><para><constant>bcast</constant>: Führt ein Broadcast
			auf allen bekannten Schnittstellen durch, die im Parameter 
			<parameter>interfaces</parameter> aufgelistet sind. Dies ist 
			die unzuverlässigste Methode der Namensauflösung, da sie 
			verlangt, dass der Ziel-Host sich in einem lokal verbundenen 
			Subnetz befindet.</para>
			</listitem>
		</itemizedlist>
		
		<para>Die Standardreihenfolge ist 
		<command>lmhosts, host, wins, bcast</command> und ohne diesen Parameter 
		oder ohne Eintrag in der Datei 
		<citerefentry><refentrytitle>smb.conf</refentrytitle>
		<manvolnum>5</manvolnum></citerefentry> werden die Methoden der
		Namensauflösung in dieser Reihenfolge ausprobiert.</para></listitem>
		</varlistentry>
		
		
		<varlistentry>
		<term>-m</term>
		<listitem><para>Diese Option sagt smbpasswd, dass es sich beim geänderten
		Konto um ein RECHNER-Konto handelt. Momentan wird das dann benutzt, 
		wenn Samba als Primärer NT-Domänen-Controller benutzt wird.</para>

		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>
		
		
		<varlistentry>
		<term>-U Benutzername</term>
		<listitem><para>Diese Option darf nur zusammen mit der Option
		<parameter>-r</parameter> benutzt werden. Bei der Änderung eines
		Passworts auf einem entfernten Rechner erlaubt sie, den 
		Benutzernamen auf diesem Rechner anzugeben, dessen Passwort 
		geändert wird. Diese Option existiert, damit Benutzer mit 
		verschiedenen Benutzernamen auf verschiedenen Systemen diese
		Passwörter ändern können.</para></listitem>
		</varlistentry>
		
		
		<varlistentry>
		<term>-h</term>
		<listitem><para>Diese Option gibt den Hilfe-String für <command>
		smbpasswd</command> aus, wobei je nach normalem oder root-Benutzer
		der richtige ausgewählt wird.</para></listitem>
		</varlistentry>
		
		
		<varlistentry>
		<term>-s</term>
		<listitem><para>Diese Option bewirkt, dass smbpasswd leise ist, d.h. 
		keine Fragen stellt, und seine alten und neuen Passwörter von der 
		Standardeingabe statt von <filename>/dev/tty</filename> einliest  
		(wie es das Programm <command>passwd(1)</command> macht). Diese 
		Option soll den Leuten helfen, die Skripte zur Steuerung von smbpasswd
		schreiben.</para>
		</listitem>
		</varlistentry>
		

		<varlistentry>
		<term>-w Passwort</term>
		<listitem><para>Dieser Parameter ist nur dann verfügbar, wenn Samba
		so konfiguriert wurde, dass es die experimentelle Option
		<command>--with-ldapsam</command> benutzt. Mit dem Schalter 
		<parameter>-w</parameter> wird das Passwort angegeben, das mit  
		<smbconfoption><name>ldap admin dn</name></smbconfoption> benutzt 
		wird. Man beachte, dass das Passwort in der Datei
		<filename>secrets.tdb</filename> gespeichert wird, 
		und vom Administrator-DN übernommen wird.
		Das bedeutet, dass falls sich jemals der Wert von <parameter>ldap
		admin dn</parameter> ändert, das Passwort manuell ebenfalls
		aktualisiert werden muss.</para>
		</listitem>
		</varlistentry>

		<varlistentry>
		<term>-i</term>
		<listitem><para>Diese Option sagt smbpasswd, dass das veränderte 
		Konto ein Interdomänen-Trust-Konto ist. Momentan wird das benutzt,
		wenn Samba als Primärer NT-Domänen-Controller verwendet wird. 
		Das Konto enthält Informationen über eine andere vertrauenswürdige
		Domäne.</para>

		<para>Diese Option ist nur dann vorhanden, wenn smbpasswd unter 
		root ausgeführt wird.</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-L</term>
		<listitem><para>Läuft im lokalen Modus.</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>Benutzername</term>
		<listitem><para>Dies gibt den Benutzernamen an, auf dem alle 
		<emphasis>nur root</emphasis>-Optionen operieren sollen. Nur root 
		kann diesen Parameter angeben, da nur root die notwendigen Rechte
		hat, Attribute direkt in der lokalen smbpasswd-Datei zu ändern. 
		</para></listitem>
		</varlistentry>
	</variablelist>
</refsect1>


<refsect1>
	<title>BEMERKUNGEN</title>
	
	<para>Da <command>smbpasswd</command> im Client-Server-Modus arbeitet
	und für einen Benutzer, der nicht root ist, mit einem lokalen smbd 
	kommuniziert, muss der smbd-Daemon laufen, damit das funktioniert. 
	Ein häufiges Problem besteht darin, eine Einschränkung der Hosts 
	vorzunehmen, die auf dem lokal laufenden <command>smbd</command> 
	zugreifen, indem einer der Einträge <parameter>allow hosts</parameter> 
	oder <parameter>deny hosts</parameter> in der 
	Datei <citerefentry><refentrytitle>smb.conf</refentrytitle>
	<manvolnum>5</manvolnum></citerefentry> angegeben wird, und vergessen
	wird, den Zugriff von "localhost" auf smbd zu erlauben.</para>

	<para>Außerdem gilt, dass der Befehl smbpasswd nur dann nützlich ist,
	wenn Samba so eingestellt wurde, dass es verschlüsselte Passwörter
	verwendet.</para>
</refsect1>


<refsect1>
	<title>VERSION</title>

	<para>Diese manpage ist korrekt für die Version 3.0 der 
	Samba Suite.</para>
</refsect1>

<refsect1>
	<title>SIEHE AUCH</title>
	<para><citerefentry><refentrytitle>smbpasswd</refentrytitle>
	<manvolnum>5</manvolnum></citerefentry>,
	<citerefentry><refentrytitle>Samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry>.</para>
</refsect1>

<refsect1>
	<title>AUTOR</title>
	
	<para>Die originale Samba-Software und die zugehörigen Werkzeuge
	wurden von Andrew Tridgell geschrieben. Samba wird nun vom 
	Samba-Team als ein Open-Source-Projekt entwickelt, ähnlich wie 
	der Linux-Kernel.</para>

	<para>Die originalen Samba-manpages wurden von Karl Auer geschrieben.
	Die manpage-Quelltexte wurden ins YODL-Format konvertiert (ein weiteres 
	exzellentes Stück Open Source Software, verfügbar unter <ulink
	url="ftp://ftp.icce.rug.nl/pub/unix/">ftp://ftp.icce.rug.nl/pub/unix/</ulink>)
	und für die Samba 2.0 Release von Jeremy Allison aktualisiert. Die 
	Umwandlung ins DocBook-Format wurde von Gerald Carter für Samba 2.2 
	durchgeführt. Die Umwandlung in DocBook für XML 4.2 wurde von Alexander 
	Bokovoy für Samba 3.0 durchgeführt.</para>
</refsect1>

</refentry>
